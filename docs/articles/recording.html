<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
<ol style="list-style-type: decimal">
<li>Recording Load Test</li>
</ol> • shinyloadtest</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">shinyloadtest</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/analyzing-results.html">3. Analyzing Results</a>
    </li>
    <li>
      <a href="../articles/load-testing.html">2. Running a Load Test</a>
    </li>
    <li>
      <a href="../articles/recording.html">1. Recording Load Test</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1><ol style="list-style-type: decimal">
<li>Recording Load Test</li>
</ol></h1>
            
            <h4 class="date">2017-09-18</h4>
          </div>

    
    
<div class="contents">
<p>The first step in conducting a load test is recording a test file. A test file captures a typical user interaction with the Shiny application including: updating inputs, navigating tabs, and “idle time” while the user is not taking any actions.</p>
<div id="recording-a-test" class="section level2">
<h2 class="hasAnchor">
<a href="#recording-a-test" class="anchor"></a>Recording a Test</h2>
<p>To record a test, use the <code>record</code> option:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">./proxyrec</span> record -t <span class="st">'http://server.example.com:3939'</span> <span class="op">&gt;</span> app-recording.txt </code></pre></div>
<p>There are three options in this command:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"> <span class="ex">--target</span>, -t Target URL  
 <span class="ex">--port</span>, -p Port to listen on
 <span class="ex">app-recording.txt</span></code></pre></div>
<p><code>--target</code> specifies the root of the URL for the application. For example, if the full URL to the shiny applications is <code>http://server.example.com/myapp</code> then specify <code>-t</code> as <code>http://server.example.com</code></p>
<p><code>--port</code> is the port <em>on the local browser</em> to run the recorder.</p>
<p><code>app-recording.txt</code> is the file where the test recording is written. Without any piping to a file the test recorder writes to <code>stdout</code>.</p>
<p>Once the recorder starts, open a browser and navigate to: <code>http://localhost:8600/myapp</code> where <code>8600</code> is the <code>-p</code> option. Note that the base url specified in <code>-t</code> is replaced with <code>http://localhost:p</code>.</p>
<p>Interact with the application as normal, including pauses when you’d expect a user to pause while looking at results.</p>
</div>
<div id="test-file" class="section level2">
<h2 class="hasAnchor">
<a href="#test-file" class="anchor"></a>Test File</h2>
<p>The recorder generates a test file that can be used to playback user actions for a load test.</p>
<blockquote>
<p>The test file should not be modified manually</p>
</blockquote>
<p>For most use cases, you shouldn’t need to worry about the contents of the test file. Interested users may continue!</p>
<p>The resulting file is composed of event lines. The event lines have one of two formats:</p>
<div class="sourceCode"><pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span><span class="dt">"type"</span><span class="fu">:</span> <span class="st">"&lt;TYPE&gt;"</span><span class="fu">,</span> <span class="dt">"created"</span><span class="fu">:</span><span class="st">"&lt;DATE&gt;"</span><span class="fu">,</span> <span class="dt">"method"</span><span class="fu">:</span><span class="st">"&lt;METHOD&gt;"</span><span class="fu">,</span> <span class="dt">"url"</span><span class="fu">:</span><span class="st">"&lt;URL&gt;"</span><span class="fu">}</span></code></pre></div>
<p>This format of event line represents a HTTP request and captures all of the communication between the browser and the client during application initialization. For example, you should see the client load the javascript required for shiny applications.</p>
<p><code>&lt;TYPE&gt;</code> is a special code that synchronize the recorder and the playback tools.</p>
<p><code>&lt;METHOD&gt;</code> is the HTTP method (usually <code>GET</code>)</p>
<p><code>&lt;URL&gt;</code> is the url requested from the server. The <code>&lt;URL&gt;</code> field does not include the actual domain of the server. The captured url also replaces the session specific worker and token fields with place holders. During playback, these fields are populated with ids valid for the playback session.</p>
<p>The second format is:</p>
<div class="sourceCode"><pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span><span class="dt">"type"</span><span class="fu">:</span> <span class="st">"&lt;TYPE&gt;"</span><span class="fu">,</span> <span class="dt">"created"</span><span class="fu">:</span><span class="st">"&lt;DATE&gt;"</span><span class="fu">,</span> <span class="dt">"message"</span><span class="fu">:</span><span class="st">"&lt;MESSAGE&gt;"</span><span class="fu">}</span></code></pre></div>
<p>This format of event line captures the web socket traffic between the client and server after the shiny application is fully initialized.</p>
<p>The <code>&lt;MESSAGE&gt;</code> field contains quite a bit of information including the actual input values sent from the client to the server and the updated outputs sent back from the server. In the case of image outputs, the message can contain large serialized data.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#recording-a-test">Recording a Test</a></li>
      <li><a href="#test-file">Test File</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Sean Lopp, Joe Cheng.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
