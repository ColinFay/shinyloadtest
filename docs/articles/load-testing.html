<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
<ol start="2" style="list-style-type: decimal">
<li>Running a Load Test</li>
</ol> • shinyloadtest</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">shinyloadtest</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/analyzing-results.html">3. Analyzing Results</a>
    </li>
    <li>
      <a href="../articles/load-testing.html">2. Running a Load Test</a>
    </li>
    <li>
      <a href="../articles/recording.html">1. Recording Load Test</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1><ol start="2" style="list-style-type: decimal">
<li>Running a Load Test</li>
</ol></h1>
            
            <h4 class="date">2017-09-18</h4>
          </div>

    
    
<div class="contents">
<p>To run a load test from a recording file, use the <code>playback</code> function in <code>proxyrec</code> and optionally the <code>poll</code> function in <code>shinyloadtest</code>.</p>
<div id="proxyrec-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#proxyrec-usage" class="anchor"></a><code>proxyrec</code> Usage</h2>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">./proxyrec</span> playback  --help</code></pre></div>
<p>The <code>playback</code> function has a number of options:</p>
<ul>
<li>
<code>&lt;file&gt;</code> The recording file.</li>
<li>
<code>--target</code> Target URL. This is the root URL of the server, <em>not the full url to the app</em>. An app at <code>http://server.example.com:3939/myApp</code> should use <code>-t http://server.example.com</code>.</li>
<li>
<code>--duration</code> Targetted test duration, which can specified through a generic string, e.g. ‘5min 30sec’. See guidelines below.</li>
<li>
<code>--startDelayMs</code> Time to wait between concurrent sessions, used to prevent all concurrent threads running in exact lock step.</li>
<li>
<code>--outdir</code> The directory to store the resulting test profiles.</li>
<li>
<code>--pause-mode</code> Whether to include user pauses during playback, see guidelines.</li>
</ul>
</div>
<div id="shinyloadtest-poll-experimental-wip" class="section level2">
<h2 class="hasAnchor">
<a href="#shinyloadtest-poll-experimental-wip" class="anchor"></a><code>shinyloadtest poll</code> Experimental WIP</h2>
<p><code>shinyloadtest</code> includes an experimental <code>poll</code> function designed to be run alongside of the <code>proxyrec</code> <code>playback</code> function.</p>
<blockquote>
<p>We recommend using RStudio 1.1 which includes support for a Terminal.</p>
</blockquote>
<p>The poll function supports <code>RStudio Connect</code> and \TODO SSP. During the course of the load test, the function will ping the server to get usage statistics on CPU, RAM, and server-reported concurrent connections. The information is plotted in real time helping track the progress of the test.</p>
<p><img src="sample-poll.png"></p>
</div>
<div id="load-testing-guidelines" class="section level2">
<h2 class="hasAnchor">
<a href="#load-testing-guidelines" class="anchor"></a>Load Testing Guidelines</h2>
<p><code>shinyloadtest</code> implements an opinionated approach to load testing that we believe best captures real-world usage.</p>
<p>Tests require 2 fundamental inputs: the targetted number of concurrent users and the desired test duration. During the test, parallel threads will be opened for each concurrent user. Each thread will playback the recorded actions. Once the recording is done, the thread will startover with a new playback. The process is repeated until the end of the test duration. Each playback logs a results file to the output directory.</p>
<p>For a realistic test we recommend:</p>
<ol style="list-style-type: decimal">
<li><p>Including user pauses. Even simple applications can overload a server if actions are taken as fast as possible. Including user pauses gives a much better representation of the realistic load a server can expect while servicing <code>n</code> users. Currently, the playback recorder pauses the exact duration paused during recording. In the future additional options will be added to model differences in user behavior.</p></li>
<li><p>Staggering the processes via the <code>startDelayMS</code> parameter. Staggering prevents the concurrent threads from sending requests to the server at the exact same time.</p></li>
</ol>
<p>Tests should be long enough for the recording to be played back at least 4-5 times. During analysis, the first and last test results for each thread are often truncated, and there should be enough data in the middle to reasonably estimate latencies.</p>
<p><img src="sample_concurrency_plot.png"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#proxyrec-usage"><code>proxyrec</code> Usage</a></li>
      <li><a href="#shinyloadtest-poll-experimental-wip"><code>shinyloadtest poll</code> Experimental WIP</a></li>
      <li><a href="#load-testing-guidelines">Load Testing Guidelines</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Sean Lopp, Joe Cheng.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
