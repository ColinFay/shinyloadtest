<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Load Test Shiny Applications • shinyloadtest</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Load Test Shiny Applications">
<meta property="og:description" content="shinyloadtest provides functions for recording user sessions,
    playing those sessions back in parallel to simulate load, and analzying
    the results.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">shinyloadtest</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Learning
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/analyzing-load-test-logs.html">Case study: interpreting load test results</a>
    </li>
    <li>
      <a href="articles/load-testing-authenticated-apps.html">Load testing authenticated apps</a>
    </li>
    <li>
      <a href="articles/faq.html">FAQ</a>
    </li>
  </ul>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    <div id="load-testing-shiny-applications" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#load-testing-shiny-applications" class="anchor"></a>Load Testing Shiny Applications</h1></div>
<blockquote>
<p>This is a WIP, do not use yet. Please follow <a href="https://community.rstudio.com">community.rstudio.com</a> for a soft launch of the tools.</p>
</blockquote>
<p>The <code>shinyloadtest</code> package and the accompanying <a href="https://github.com/rstudio/shinycannon"><code>shinycannon</code></a> software enable load testing deployed Shiny applications.</p>
<p>Load testing helps developers and administrators estimate how many users their application can support. If an application requires tuning, load testing and load test result analysis can be used to identify performance bottlenecks and to guide changes to infrastructure, configuration, or code.</p>
<p>It’s a common misconception that “Shiny doesn’t scale.” In actuality, properly-architected Shiny applications can be scaled horizontally, a fact which Sean Lopp was recently able to demonstrate at rstudio::conf 2018. We used <code>shinycannon</code> to simulate 10,000 concurrent users interacting with an application deployed to AWS. You can see a recording of Sean’s talk and the load test demonstration here: <a href="https://www.rstudio.com/resources/videos/scaling-shiny/">Scaling Shiny</a></p>
<p>To get started with <code>shinyloadtest</code> read through the quick start guide below.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>To perform a load test you’ll need two pieces of software: <code>shinyloadtest</code> and <code>shinycannon</code>.</p>
<ul>
<li>
<code>shinyloadtest</code> is an R package used to generate recordings and analyze results. You should install it on your development machine.</li>
<li>
<code>shinycannon</code> is the command-line replay tool. You can install it on your development machine for testing, but for best results we recommend installing it on a server, and preferably not the one the application under test is also on.</li>
</ul>
<div id="shinyloadtest" class="section level3">
<h3 class="hasAnchor">
<a href="#shinyloadtest" class="anchor"></a><code>shinyloadtest</code>
</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools::<span class="kw">install_github</span>(<span class="st">'rstudio/shinyloadtest'</span>)</code></pre></div>
</div>
<div id="shinycannon" class="section level3">
<h3 class="hasAnchor">
<a href="#shinycannon" class="anchor"></a><code>shinycannon</code>
</h3>
<p>As opposed to the <code>shinyloadtest</code> R package, <code>shinycannon</code> is installed and run differently depending on platform.</p>
<div id="linux" class="section level4">
<h4 class="hasAnchor">
<a href="#linux" class="anchor"></a>Linux</h4>
<p>On many GNU/Linux distributions, <code>shinycannon</code> can be installed using a package:</p>
<table class="table">
<colgroup>
<col width="5%">
<col width="5%">
<col width="88%">
</colgroup>
<thead><tr class="header">
<th align="left">Platform</th>
<th align="left">Download URL</th>
<th align="left">Install Command</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Ubuntu/Debian</td>
<td align="left"><a href="https://s2.amazonaws.com/rstudio-shinycannon-build/2018-08-16-15:45:30_1.0.0-22cb125/deb/shinycannon_1.0.0-22cb125_amd64.deb">shinycannon_1.0.0-22cb125_amd64.deb</a></td>
<td align="left"><code>sudo dpkg -i shinycannon_1.0.0-22cb125_amd64.deb</code></td>
</tr>
<tr class="even">
<td align="left">Redhat/Fedora/CentOS</td>
<td align="left"><a href="https://s3.amazonaws.com/rstudio-shinycannon-build/2018-08-16-15:45:30_1.0.0-22cb125/rpm/shinycannon-1.0.0-22cb125.x86_64.rpm">shinycannon_1.0.0-22cb125.x86_64.rpm</a></td>
<td align="left"><code>sudo yum install -y shinycannon_1.0.0-22cb125.x86_64.rpm</code></td>
</tr>
</tbody>
</table>
</div>
<div id="macos" class="section level4">
<h4 class="hasAnchor">
<a href="#macos" class="anchor"></a>macOS</h4>
<ol>
<li>Install <a href="https://www.java.com/en/download/">Java</a>
</li>
<li>Download <a href="https://s3.amazonaws.com/rstudio-shinycannon-build/2018-08-16-15:45:30_1.0.0-22cb125/bin/shinycannon-1.0.0-22cb125.sh">shinycannon-1.0.0-22cb125.sh</a>
</li>
<li>Install with <code>sudo cp shinycannon-1.0.0-22cb125.sh /usr/local/bin/shinycannon; sudo chmod +x /usr/local/bin/shinycannon</code>
</li>
</ol>
</div>
<div id="windows" class="section level4">
<h4 class="hasAnchor">
<a href="#windows" class="anchor"></a>Windows</h4>
<ol>
<li>Install <a href="https://www.java.com/en/download/">Java</a>
</li>
<li>Download <a href="https://s3.amazonaws.com/rstudio-shinycannon-build/2018-08-16-15:45:30_1.0.0-22cb125/jar/shinycannon-1.0.0-22cb125.jar">shinycannon-1.0.0-22cb125.jar</a> to the directory you wish to run it in</li>
<li>Run with <code>java -jar shinycannon-1.0.0-22cb125.jar</code>
</li>
</ol>
</div>
</div>
</div>
<div id="quick-start" class="section level2">
<h2 class="hasAnchor">
<a href="#quick-start" class="anchor"></a>Quick Start</h2>
<p>The process for load testing a Shiny application consists of three steps:</p>
<ol>
<li>
<strong>Record</strong> a typical user session for the app</li>
<li>
<strong>Replay</strong> the session in parallel, simulating many simultaneous users accessing the app</li>
<li>
<strong>Analyze</strong> the results of the load test and determine if the app performed well enough</li>
</ol>
<p>Rinse and repeat as necessary. Each step is described below.</p>
<div id="step-1-recording" class="section level3">
<h3 class="hasAnchor">
<a href="#step-1-recording" class="anchor"></a>Step 1: Recording</h3>
<p>Record a session using the <code>recordSession</code> function, which takes the URL of the <strong>deployed</strong> application:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">shinyloadtest::<span class="kw"><a href="reference/record_session.html">record_session</a></span>(<span class="st">'https://beta.rstudioconnect.com/content/3239/'</span>)</code></pre></div>
<p>Running the function will open a browser displaying the app. Once open, interact with the application as a normal user would and then close the browser. After closing the browser, a file will be created that contains a recording of the session. This recording, written to <code>recording.log</code> by default, will serve as the basis for the load test.</p>
</div>
<div id="step-2-run-the-load-test" class="section level3">
<h3 class="hasAnchor">
<a href="#step-2-run-the-load-test" class="anchor"></a>Step 2: Run the Load Test</h3>
<p>With the recording in hand, we’re ready to run the load test. The actual test is conducted outside of R using the stand alone <code>shinycannon</code> tool.</p>
<p><code>shinycannon</code> can be used from the command line. An easy option is to use <code>shinycannon</code> from the RStudio terminal. The main arguments to <code>shinycannon</code> are:</p>
<ul>
<li><p><strong>sessions</strong>: The number of concurrent users to simulate. <code>shinycannon</code> uses separate parallel threads to represent each user.</p></li>
<li><p><strong>loaded-duration-minutes</strong>: The duration of the load test. <code>shinycannon</code> will re-run the recording as necessary to meet the specified duration. For example, if the recording is 5 minutes long, but the desired test duration is 18 minutes, <code>shinycannon</code> will</p></li>
</ul>
<p>As an example, to run a load test simulating 100 concurrent users for 20 minutes:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">shinycannon</span> recording.log https://beta.rstudioconnect.com/content/3239/ --sessions=100 --loaded-duration-minutes=20s

<span class="kw">Logging</span> at INFO level to output_dir/detail.log
<span class="kw">2018-06-15T11</span>:22:29.465037Z - Running: 0, Failed: 0, Done: 0
<span class="kw">2018-06-15T11</span>:22:29.466399Z - Worker thread 1 warming up
<span class="kw">2018-06-15T11</span>:22:29.476858Z - Worker thread 2 warming up
<span class="kw">2018-06-15T11</span>:22:29.477245Z - Worker thread 3 warming up
                           <span class="kw">...</span>
<span class="kw">2018-06-15T11</span>:22:29.499708Z - Waiting for warmup to complete
                           <span class="kw">...</span>
<span class="kw">2018-06-15T11</span>:22:29.516885Z - Maintaining for 20 minutes
<span class="kw">2018-06-15T11</span>:28:34.465847Z - Running: 100, Failed: 0, Done: 0
                           <span class="kw">...</span>
<span class="kw">2018-06-15T11</span>:44:29.517080Z - Stopped maintaining, waiting for workers to stop
<span class="kw">2018-06-15T11</span>:48:34.465847Z - Running: 60, Failed: 0, Done: 40
                           <span class="kw">...</span></code></pre></div>
<p><code>shinycannon</code> includes detailed help documentation explaining the other arguments:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">shinycannon</span> --help</code></pre></div>
<p>During the test, <code>shinycannon</code> reports the progress and number of simulated users. The result of the test is an output directory which includes timing information for each session.</p>
</div>
<div id="step-3-analyze-the-results" class="section level3">
<h3 class="hasAnchor">
<a href="#step-3-analyze-the-results" class="anchor"></a>Step 3: Analyze the Results</h3>
<p>The output directory created in step 2 is the focus of step 3. The <code>shinyloadtest</code> R package provides functions for analyzing the output files from the test.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(shinyloadtest)
results &lt;-<span class="st"> </span><span class="kw"><a href="reference/tidy_loadtest.html">tidy_loadtest</a></span>(
      <span class="st">`</span><span class="dt">20 users</span><span class="st">`</span> =<span class="st"> 'load-test-results'</span>,
      <span class="st">`</span><span class="dt">1 user</span><span class="st">`</span> =<span class="st"> 'baseline-results'</span>
)
results</code></pre></div>
<p><img src="inst/img/results.png"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">results %&gt;%
<span class="st">   </span><span class="kw">hist_loadtimes</span>()
results %&gt;%
<span class="st">   </span><span class="kw"><a href="reference/plot_loadtest.html">plot_time_boxplot</a></span>()</code></pre></div>
<p><img src="inst/img/hist_loadtime.png"></p>
<p><img src="inst/img/boxplot.png"></p>
<p>Load the results into a shiny flex dashboard</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">results %&gt;%
<span class="st">  </span><span class="kw"><a href="reference/make_report.html">make_report</a></span>() %&gt;%
<span class="st">  </span>rmarkdown::<span class="kw">run</span>()</code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Report a bug at <br><a href="https://github.com/rstudio/shinyloadtest/issues">https://​github.com/​rstudio/​shinyloadtest/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Alan Dipert <br><small class="roles"> Author, maintainer </small>  </li>
<li>Barbara Borges <br><small class="roles"> Author </small>  </li>
<li>Barret Schloerke <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://www.rstudio.com"><img src="https://tidyverse.org/rstudio-logo.svg" height="24"></a> <br><small class="roles"> Copyright holder, funder </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Alan Dipert, Barbara Borges, Barret Schloerke, <a href="https://www.rstudio.com"><img src="https://tidyverse.org/rstudio-logo.svg" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
