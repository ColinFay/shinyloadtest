<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tools for laod testing Shiny applications • shinyloadtest</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">shinyloadtest</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    <div id="shinyloadtest" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#shinyloadtest" class="anchor"> </a>shinyloadtest</h1></div>

<p>This package extends the <a href="https://github.com/rstudio/shinytest">shinytest package</a> to enable users to load test deployed Shiny applications. Load testing is executed using parallel phantomJS sessions.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"> </a>Installation</h2>
<p>Currently, <code>shinyloadtest</code> is available on Github:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools::<span class="kw">install_github</span>(<span class="st">"rstudio/shinyloadtest"</span>)</code></pre></div>
<p>You will also need to install <code>shinytest</code> and <code>phantomJS</code>. <code>shinytest</code> includes a helper function to install the latest version of <code>phantomJS</code>.</p>
</div>
<div id="record-test" class="section level2">
<h2 class="hasAnchor">
<a href="#record-test" class="anchor"> </a>Record Test</h2>
<p>To get started, record a test using the <code>shinytest</code> package’s recorder with <code>load_mode</code> enabled. The test should be reflective of expected application use. For more details, see the <a href="https://rstudio.github.io/shinytest/"><code>shinytest</code> documentation</a>. Tests must be recorded against a local copy of the deployed application.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(shinytest)
<span class="kw">recordTest</span>(<span class="st">"path/to/app"</span>, <span class="dt">load_mode =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="img/recorder_screenshot_superzip.png"></p>
<p>The recorder will save interactions with the application and timing information into a R file. In <code>load_mode</code> the recorded timing includes user pauses. This infomration is used to simulate a realistic user experience while load testing the application.</p>
</div>
<div id="performing-a-load-test" class="section level2">
<h2 class="hasAnchor">
<a href="#performing-a-load-test" class="anchor"> </a>Performing a Load Test</h2>
<p>The easiest way to use the package is through the included addin. From within RStudio, navigate to the application file and then click <code>Load Test Shiny App</code> from the Addins menu.</p>
<p><img src="img/addin.png"></p>
<p>The addin will walk through the parameters for defining a load test and will help pick useful defaults. Clicking <code>Run</code> will begin the load test. The load test includes running the application at load and a baseline test composed of a series of sequential tests, each executed 1 at a time. At the end of the load test an HTML report is created containing useful information about the result of the test. Detailed logs are also generated and written to the current working directory.</p>
<p><strong>WARNING</strong> The load test can take a long time to run. The addin includes an estimate of the total test duration. The load test will generate multiple processes on the client machine. Use with caution.</p>
</div>
<div id="example-report-output" class="section level2">
<h2 class="hasAnchor">
<a href="#example-report-output" class="anchor"> </a>
<a href="https://beta.rstudioconnect.com/content/2612/addinTest.html">Example Report Output</a>
</h2>
</div>
<div id="the-loadtest-function" class="section level2">
<h2 class="hasAnchor">
<a href="#the-loadtest-function" class="anchor"> </a>The <code>loadTest</code> function</h2>
<p>The addin uses the <code>loadTest</code> function to run the load test.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(shinyloadtest)  
<span class="kw"><a href="reference/loadTest.html">loadTest</a></span>(<span class="dt">testFile =</span> <span class="st">'myloadTest.R'</span>,
         <span class="dt">url =</span> <span class="st">'https://beta.rstudioconnect.com/content/2551'</span>,
         <span class="dt">numConcurrent =</span> <span class="dv">8</span>,
         <span class="dt">numTotal =</span> <span class="dv">16</span>,
         <span class="dt">loadTimeout =</span> <span class="dv">5</span>,
         <span class="dt">stagger =</span> <span class="dv">4</span>, 
         <span class="dt">phantomTimeout =</span> <span class="dv">20</span>)</code></pre></div>
<p>This function uses the <code>parallel</code> and <code>foreach</code> packages to open concurrent R processes. Each R process uses phantomJS to run the recorded test against the deployed application.</p>
<p><code>numConcurrent</code> is the number of concurrent connections to the application.</p>
<p><code>numTotal</code> is the total number of tests run against the application.</p>
<p><code>loadTimeout</code> is the maximum amount of seconds to wait for the Shiny app to load.</p>
<p><code>stagger</code> adds a random delay of up to <code>stagger</code> seconds to the concurrent connections.</p>
<p><code>phantomTimeout</code> is the maximum seconds to wait for the phantomJS process to start.</p>
<p><strong>WARNING</strong> Load testing a large number of concurrent connections will open a large number of processes on the client computer. Use with caution.</p>
<p>The <code>loadTest</code> function returns an event log that contains timing and event information for each visit to the application. The package includes functions for analyzing the event log such as <code>getSuccesses</code>, <code>getErrors</code>, <code>getMaxConcurrent</code>, <code>getPageLoadTimes</code>, and others.</p>
</div>
<div id="use-cases" class="section level2">
<h2 class="hasAnchor">
<a href="#use-cases" class="anchor"> </a>Use Cases</h2>
<p><code>shinyloadtest</code> is best suited for testing applications with 20-60 concurrent connections. Driving more load on the deployed appliction is possible, but may require a server to act as the client.</p>
<p>We recommend using <code>shinyloadtest</code> to experiment with application performance and tuning. For more details see: <a href="https://support.rstudio.com/hc/en-us/articles/220546267-Scaling-and-Performance-Tuning-Applications-in-Shiny-Server-Pro">Performance Tuning for Shiny Server Pro</a>, <a href="https://support.rstudio.com/hc/en-us/articles/231874748">Performance Tuning for RStudio Connect</a>, and <a href="http://shiny.rstudio.com/articles/scaling-and-tuning.html">Performance Tuning for shinyapps.io</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3" id="sidebar">
    <h2>License</h2>
<p><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Sean Lopp <br><small class="roles"> Author, maintainer </small> </li>
<li>Winston Chang <br><small class="roles"> Author </small> </li>
</ul>
<html><body>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/rstudio/shinyloadtest"><img src="https://travis-ci.org/rstudio/shinyloadtest.svg?branch=master" alt="Build Status"></a></li>
</ul>
</body></html>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Sean Lopp, Winston Chang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
